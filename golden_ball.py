import pandas as pd
import plotly.express as px
import plotly.graph_objects as go

from geo_map_utils import create_geo_map_image

# Load the dataset
df = pd.read_csv('football/golden_ball.csv')

# Add country flags for each country
country_flags = {
    'ĞÑ€Ğ³ĞµĞ½Ñ‚Ğ¸Ğ½Ğ°': 'ğŸ‡¦ğŸ‡·',
    'Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ñ': 'ğŸ‡«ğŸ‡·',
    'Ğ“ĞµÑ€Ğ¼Ğ°Ğ½Ğ¸Ñ': 'ğŸ‡©ğŸ‡ª',
    'Ğ¤Ğ Ğ“': 'ğŸ‡©ğŸ‡ª',
    'ĞĞ¸Ğ´ĞµÑ€Ğ»Ğ°Ğ½Ğ´Ñ‹': 'ğŸ‡³ğŸ‡±',
    'ĞŸĞ¾Ñ€Ñ‚ÑƒĞ³Ğ°Ğ»Ğ¸Ñ': 'ğŸ‡µğŸ‡¹',
    'Ğ˜Ñ‚Ğ°Ğ»Ğ¸Ñ': 'ğŸ‡®ğŸ‡¹',
    'Ğ’ĞµĞ»Ğ¸ĞºĞ¾Ğ±Ñ€Ğ¸Ñ‚Ğ°Ğ½Ğ¸Ñ': 'ğŸ‡¬ğŸ‡§',
    'Ğ‘Ñ€Ğ°Ğ·Ğ¸Ğ»Ğ¸Ñ': 'ğŸ‡§ğŸ‡·',
    'Ğ˜ÑĞ¿Ğ°Ğ½Ğ¸Ñ': 'ğŸ‡ªğŸ‡¸',
    'Ğ¡Ğ¡Ğ¡Ğ ': 'ğŸ‡·ğŸ‡º',
    'Ğ£ĞºÑ€Ğ°Ğ¸Ğ½Ğ°': 'ğŸ‡ºğŸ‡¦',
    'Ğ§ĞµÑ…Ğ¸Ñ': 'ğŸ‡¨ğŸ‡¿',
    'Ğ§ĞµÑ…Ğ¾ÑĞ»Ğ¾Ğ²Ğ°ĞºĞ¸Ñ': 'ğŸ‡¨ğŸ‡¿',
    'Ğ’ĞµĞ½Ğ³Ñ€Ğ¸Ñ': 'ğŸ‡­ğŸ‡º',
    'Ğ”Ğ°Ğ½Ğ¸Ñ': 'ğŸ‡©ğŸ‡°',
    'Ğ‘Ğ¾Ğ»Ğ³Ğ°Ñ€Ğ¸Ñ': 'ğŸ‡§ğŸ‡¬',
    'Ğ›Ğ¸Ğ±ĞµÑ€Ğ¸Ñ': 'ğŸ‡±ğŸ‡·',
    'Ğ¥Ğ¾Ñ€Ğ²Ğ°Ñ‚Ğ¸Ñ': 'ğŸ‡­ğŸ‡·',
}

# Add latitude and longitude for each country
country_coords = {
    'ĞÑ€Ğ³ĞµĞ½Ñ‚Ğ¸Ğ½Ğ°': {'lat': -34.6037, 'lon': -58.3816},
    'Ğ‘Ñ€Ğ°Ğ·Ğ¸Ğ»Ğ¸Ñ': {'lat': -14.2350, 'lon': -51.9253},
    'Ğ›Ğ¸Ğ±ĞµÑ€Ğ¸Ñ': {'lat': 6.4281, 'lon': -9.4295},
    'Ğ¤Ğ Ğ“': {'lat': 50, 'lon': -17},
    'Ğ¡Ğ¡Ğ¡Ğ ': {'lat': 48, 'lon': -17},
    'Ğ§ĞµÑ…Ğ¾ÑĞ»Ğ¾Ğ²Ğ°ĞºĞ¸Ñ': {'lat': 46, 'lon': -17},
    'Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ñ': {'lat': 47.6034, 'lon': 1.8883},
    'Ğ“ĞµÑ€Ğ¼Ğ°Ğ½Ğ¸Ñ': {'lat': 49.5, 'lon': 7.5},
    'ĞĞ¸Ğ´ĞµÑ€Ğ»Ğ°Ğ½Ğ´Ñ‹': {'lat': 52.1326, 'lon': 5.2913},
    'ĞŸĞ¾Ñ€Ñ‚ÑƒĞ³Ğ°Ğ»Ğ¸Ñ': {'lat': 38.5, 'lon': -8.2245},
    'Ğ˜Ñ‚Ğ°Ğ»Ğ¸Ñ': {'lat': 41.8719, 'lon': 12.5674},
    'Ğ’ĞµĞ»Ğ¸ĞºĞ¾Ğ±Ñ€Ğ¸Ñ‚Ğ°Ğ½Ğ¸Ñ': {'lat': 54.3555, 'lon': -1.5},
    'Ğ˜ÑĞ¿Ğ°Ğ½Ğ¸Ñ': {'lat': 41, 'lon': -2.5},
    'Ğ£ĞºÑ€Ğ°Ğ¸Ğ½Ğ°': {'lat': 50.4501, 'lon': 30.5234},  # Updated to Kiev coordinates
    'Ğ§ĞµÑ…Ğ¸Ñ': {'lat': 49.92, 'lon': 17.72},
    'Ğ’ĞµĞ½Ğ³Ñ€Ğ¸Ñ': {'lat': 47.1625, 'lon': 19.5033},
    'Ğ”Ğ°Ğ½Ğ¸Ñ': {'lat': 56.2639, 'lon': 9.5018},
    'Ğ‘Ğ¾Ğ»Ğ³Ğ°Ñ€Ğ¸Ñ': {'lat': 42.7339, 'lon': 25.4858},
    'Ğ¥Ğ¾Ñ€Ğ²Ğ°Ñ‚Ğ¸Ñ': {'lat': 45.1, 'lon': 15.2},
}

# Add latitude and longitude for each country
df['lat'] = df['Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ°'].map(lambda x: country_coords[x]['lat'])
df['lon'] = df['Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ°'].map(lambda x: country_coords[x]['lon'])
df['text'] = df.apply(
    lambda row: f"{country_flags[row['Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ°']]}   {row['Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ°']} ({row['ĞŸĞ¾Ğ±ĞµĞ´Ñ‹']}, {row['Ğ˜Ğ³Ñ€Ğ¾ĞºĞ¸']})", axis=1)


create_geo_map_image(df, 'ĞŸĞ¾Ğ±ĞµĞ´Ñ‹')
